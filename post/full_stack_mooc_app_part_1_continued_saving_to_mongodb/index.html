<!DOCTYPE html>
<html lang="en">
   <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
    <meta name="description" content="">
    <meta name="author" content="">
    <link rel="shortcut icon" href="img/favicon/favicon.png">

    <title>Mooc Aggregator Project, Python backend Continued, saving to mongodb and postgres</title>

    <!-- Bootstrap core CSS -->
    <!--<link href="static/css/bootstrap.css" rel="stylesheet">-->
    <link href="//netdna.bootstrapcdn.com/bootstrap/3.1.1/css/bootstrap.min.css" rel="stylesheet">
    <!--<link href="static/css/bootstrap-theme.css" rel="stylesheet">-->

    <!-- Custom styles for this template -->
    <link href='http://fonts.googleapis.com/css?family=Raleway:400,800' rel='stylesheet' type='text/css'>
    <link href='http://fonts.googleapis.com/css?family=Noto+Serif:700,400italic' rel='stylesheet' type='text/css'>
    <link href="/static/css/font-awesome.min.css" rel="stylesheet">
    <link href="/static/css/github.css" type="text/css" rel="stylesheet">
    <link href="/static/css/style_mod.css" rel="stylesheet">
    <link href="/static/css/responsive.css" rel="stylesheet">
    <link href="/static/js/prettify/prettify.css" type="text/css" rel="stylesheet">

    <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
      <script src="js/html5shiv.js"></script>
      <script src="js/respond.min.js"></script>
    <![endif]-->

       <script type="text/javascript">
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-7196717-1', 'brettdangerfield.com');
  ga('send', 'pageview');

</script>
          <script src="//ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
    <!-- Le javascript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
   <!-- Bootstrap core JavaScript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
    <script src="/static/js/bootstrap.js"></script>
    <script src="/static/js/masonry.pkgd.min.js"></script>
    <script src="/static/js/imagesloaded.pkgd.min.js"></script>
    <script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=false&amp;language=en"></script>
    <script src="/static/js/gmap3.min.js"></script>
    <script src="/static/js/jquery.isotope.min.js"></script>
    <script src="/static/js/jquery.easing.js"></script>
    <script src="/static/js/script.js"></script>
    <script type="text/javascript" src="/static/js/prettify/prettify.js"></script>

  </head>
  <body>

  <!-- HEADER HERE -->
       <!-- begin:navbar -->
    <nav class="navbar navbar-default navbar-transparent navbar-fixed-top" role="navigation">
      <div class="container">
        <!-- Brand and toggle get grouped for better mobile display -->
        <div class="navbar-header">
          <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar-top">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="navbar-brand" href="/"><i class="fa fa-fighter-jet"></i> <span>Dang</span>er!</a>
        </div>

        <!-- Collect the nav links, forms, and other content for toggling -->
        <div class="collapse navbar-collapse" id="navbar-top">
          <ul class="nav navbar-nav navbar-right">
            <li  class=""><a href="/"><i class="icon-home icon-large"></i>Home</a></li>
              <li class=""><a href="/page/about"><i class="icon-user icon-large"></i>About</a></li>
              <li class=""><a href="/page/contact"><i class="icon-user icon-large"></i>Contact</a></li>
          </ul>
        </div><!-- /.navbar-collapse -->
      </div><!-- /.container-fluid -->
    </nav>
    <!-- end:navbar -->

    <!-- begin:header -->
    <section id="header" class="heading" style="background: url(/static/img/backgrounds/sunset2.jpg);">
        <div class="container">
            <div class="row">
                <div class="col-md-8 col-md-offset-2">
                    <div class="title-desc">
                        
                            <h2>My Blog</h2>
                        
                    </div>
                </div>
            </div>
        </div>
        <div class="overlay"></div>
    </section>
    <!-- end:header -->

<section id="content">
      <div class="container">
        <div class="row">
            <div class="col-lg-9 col-md-8 col-sm-8 post-single">
                            <div class="heading-title">
    <h2><a href="/post/full_stack_mooc_app_part_1_continued_saving_to_mongodb">Mooc Aggregator Project, Python backend Continued, saving to mongodb and postgres</a></h2>
</div>
<div class="post-meta">
    <span><em>22 Apr 2014 </em></span>
    <span><em>In <a href="#">Programming</a></em></span>
    <span class="right" ><i class="fa fa-comment"></i> <a href="/post/full_stack_mooc_app_part_1_continued_saving_to_mongodb#disqus_thread" >0 Comments</a></span>
</div>
<div id="story"><h3>Part 1 Continued - Saving to mongodb</h3>

<p>I decided to build an online course aggregator and introduced the project in <a href="/post/full_stack_mooc_application_intro/">this</a> post, and <a href="/post/full_stack_mooc_app_part_1_python_backend/">last week</a> I started part 1 explaining the backend and creating the first provider class for coursera. This post I will dive into the storage engines, initially I created two storage engines; mongodb and postgres using sql alchemy. </p>

<!--more-->

<p>The storage engine is similar to the provider model, where I create an abstract base class that contains the store_courses() abstract method and each engine will implement that method.  Here is the main program which iterates over a list of providers and collects courses, then iterates over the storage engines saving the courses.</p>
<div class="highlight"><pre><code class="python language-python" data-lang="python"><span class="kn">import</span> <span class="nn">importlib</span>

<span class="n">provider_list</span> <span class="o">=</span> <span class="p">[</span><span class="s">&quot;coursera&quot;</span><span class="p">,</span> <span class="s">&quot;edx&quot;</span><span class="p">]</span>
<span class="n">storage_list</span> <span class="o">=</span> <span class="p">[</span><span class="s">&quot;mongodb&quot;</span><span class="p">,</span> <span class="s">&quot;postgres&quot;</span><span class="p">]</span>

<span class="c">#loop over the providers and call their get courses method</span>
<span class="k">for</span> <span class="n">provider</span> <span class="ow">in</span> <span class="n">provider_list</span><span class="p">:</span>
    <span class="k">print</span> <span class="s">&quot;Collecting Courses for provider: {}&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">provider</span><span class="p">)</span> <span class="c">#use importlib to &quot;polymorphicly call the providers&quot;</span>
    <span class="n">mod</span> <span class="o">=</span> <span class="n">importlib</span><span class="o">.</span><span class="n">import_module</span><span class="p">(</span><span class="s">&quot;providers.&quot;</span> <span class="o">+</span> <span class="n">provider</span><span class="o">.</span><span class="n">lower</span><span class="p">())</span> <span class="c">#import module</span>
    <span class="n">func</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">mod</span><span class="p">,</span> <span class="n">provider</span><span class="p">)()</span> <span class="c">#create instance</span>
    <span class="n">data</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">func</span><span class="p">,</span> <span class="s">&quot;get_courses&quot;</span><span class="p">)()</span> <span class="c">#call get courses, from any provide we expect the same dictionary structure to be returned</span>

    <span class="c">#loop through Storage Engines Lists</span>
    <span class="k">for</span> <span class="n">store</span> <span class="ow">in</span> <span class="n">storage_list</span><span class="p">:</span>
        <span class="k">print</span> <span class="s">&quot;Saving Courses into Engine: {}&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">store</span><span class="p">)</span>
        <span class="n">mod</span> <span class="o">=</span> <span class="n">importlib</span><span class="o">.</span><span class="n">import_module</span><span class="p">(</span><span class="s">&quot;storage.&quot;</span> <span class="o">+</span> <span class="n">store</span><span class="o">.</span><span class="n">lower</span><span class="p">())</span>
        <span class="n">func</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">mod</span><span class="p">,</span> <span class="n">store</span><span class="p">)()</span>
        <span class="nb">getattr</span><span class="p">(</span><span class="n">func</span><span class="p">,</span> <span class="s">&quot;store_courses&quot;</span><span class="p">)(</span><span class="n">data</span><span class="p">)</span> <span class="c">#call the store courses method to save the data</span>
</code></pre></div>
<p>Here we loop collect the data from the provider, then save that providers data for every enabled storage engine. Since my provider class returns a specific JSON structure creating the mongodb engine was very simple as we just need to store that json doc.  First things first, here is the basic storage engine abstract base class.</p>
<div class="highlight"><pre><code class="python language-python" data-lang="python"><span class="kn">from</span> <span class="nn">abc</span> <span class="kn">import</span> <span class="n">ABCMeta</span><span class="p">,</span> <span class="n">abstractmethod</span>
<span class="kn">import</span> <span class="nn">yaml</span>


<span class="k">class</span> <span class="nc">StorageBase</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="n">__metaclass__</span> <span class="o">=</span> <span class="n">ABCMeta</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">get_config</span><span class="p">(</span><span class="n">cls</span><span class="p">,</span> <span class="n">engine_name</span><span class="p">):</span>
        <span class="n">config</span> <span class="o">=</span> <span class="n">yaml</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="nb">open</span><span class="p">(</span><span class="s">&#39;config.yaml&#39;</span><span class="p">))</span>
        <span class="k">return</span> <span class="n">config</span><span class="p">[</span><span class="s">&#39;storage_configs&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">engine_name</span><span class="p">,</span> <span class="bp">None</span><span class="p">)</span>

    <span class="nd">@abstractmethod</span>
    <span class="k">def</span> <span class="nf">store_courses</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c">#abstract implemented in each provider</span>
        <span class="k">pass</span>
</code></pre></div>
<p>Once again we are using python&#39;s ABC library to create the abstract class.  I also created a get_config class method to get settings from a configuration file.</p>

<h3>MongoDB Storage Engine</h3>

<p>The mongodb simply needs to iterate over each course and save the specific course in a collection. However, I plan on running this program on a semi-regular basis and I only want to update existing data so I don&#39;t have duplication.  Unfortunately I could not find an easy way to perform a bulk upsert, so I am  iterating and upserting individually. This seems to work well enough.  Here is what the mongoengine looks like.</p>
<div class="highlight"><pre><code class="python language-python" data-lang="python"><span class="kn">from</span> <span class="nn">storage</span> <span class="kn">import</span> <span class="n">StorageBase</span>
<span class="kn">import</span> <span class="nn">pymongo</span>
<span class="kn">from</span> <span class="nn">pymongo</span> <span class="kn">import</span> <span class="n">ASCENDING</span>


<span class="k">class</span> <span class="nc">MongoDB</span><span class="p">(</span><span class="n">StorageBase</span><span class="p">):</span>
    <span class="c">#do not override here, place this in the YAML configuration config.yaml</span>
    <span class="n">config</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s">&quot;server&quot;</span><span class="p">:</span> <span class="s">&quot;localhost&quot;</span><span class="p">,</span>
        <span class="s">&quot;db&quot;</span><span class="p">:</span> <span class="s">&quot;wisdom&quot;</span><span class="p">,</span>
        <span class="s">&quot;collection&quot;</span><span class="p">:</span> <span class="s">&quot;courses&quot;</span><span class="p">}</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">config</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_config</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__class__</span><span class="o">.</span><span class="n">__name__</span><span class="p">)</span>  <span class="c"># call the super init method to get config</span>

        <span class="k">if</span> <span class="n">config</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">config</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="p">[</span><span class="n">item</span><span class="p">]</span> <span class="o">=</span> <span class="n">config</span><span class="p">[</span><span class="n">item</span><span class="p">]</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">collection</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="p">[</span><span class="s">&quot;collection&quot;</span><span class="p">]</span>

        <span class="n">connection</span> <span class="o">=</span> <span class="n">pymongo</span><span class="o">.</span><span class="n">MongoClient</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="p">[</span><span class="s">&quot;server&quot;</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">db</span> <span class="o">=</span> <span class="n">connection</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="p">[</span><span class="s">&quot;db&quot;</span><span class="p">]]</span>

    <span class="k">def</span> <span class="nf">store_courses</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">courses</span><span class="p">):</span>
        <span class="c">#we can&#39;t bulk upsert so lets loop and upsert</span>
        <span class="k">for</span> <span class="n">course</span> <span class="ow">in</span> <span class="n">courses</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">db</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">collection</span><span class="p">]</span><span class="o">.</span><span class="n">update</span><span class="p">({</span><span class="s">&quot;id&quot;</span><span class="p">:</span> <span class="n">course</span><span class="p">[</span><span class="s">&quot;id&quot;</span><span class="p">]},</span> <span class="n">course</span><span class="p">,</span> <span class="n">upsert</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">__set_indicies</span><span class="p">()</span>

    <span class="c">#this method is to override the collection for testing</span>
    <span class="k">def</span> <span class="nf">set_collection</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">collection</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">collection</span> <span class="o">=</span> <span class="n">collection</span>

    <span class="c">#setup any indexes we might want</span>
    <span class="k">def</span> <span class="nf">__set_indicies</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">db</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">collection</span><span class="p">]</span><span class="o">.</span><span class="n">ensure_index</span><span class="p">(</span><span class="s">&quot;id&quot;</span><span class="p">,</span> <span class="n">unique</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">db</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">collection</span><span class="p">]</span><span class="o">.</span><span class="n">ensure_index</span><span class="p">([(</span><span class="s">&quot;course_name&quot;</span><span class="p">,</span> <span class="n">ASCENDING</span><span class="p">),</span> <span class="p">(</span><span class="s">&quot;provider&quot;</span><span class="p">,</span> <span class="n">ASCENDING</span><span class="p">)],</span> <span class="n">unique</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
</code></pre></div>
<p>We have a default configuration in case the collection, server and db names aren&#39;t set in the config file.  The store_courses implementation with mongo is very easy.</p>
<div class="highlight"><pre><code class="python language-python" data-lang="python"><span class="k">def</span> <span class="nf">store_courses</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">courses</span><span class="p">):</span>
    <span class="c">#we can&#39;t bulk upsert so lets loop and upsert</span>
    <span class="k">for</span> <span class="n">course</span> <span class="ow">in</span> <span class="n">courses</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">db</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">collection</span><span class="p">]</span><span class="o">.</span><span class="n">update</span><span class="p">({</span><span class="s">&quot;id&quot;</span><span class="p">:</span> <span class="n">course</span><span class="p">[</span><span class="s">&quot;id&quot;</span><span class="p">]},</span> <span class="n">course</span><span class="p">,</span> <span class="n">upsert</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">__set_indicies</span><span class="p">()</span>
</code></pre></div>
<p>We simply call pymongo&#39;s update method and set upsert to true so it adds docs that don&#39;t exist.  I also added a private method to create indexes on the id and course_name fields so we can have fast searches on those fields.</p>

<h3>Unit Testing the mongo class</h3>

<p>Once again I use a test driven approach not only because it is a best practice, but also because I don&#39;t want to hammer the coursera API over and over while I code the storage engines. In the test folder there is a stubs folder that contains a <code>collected_courses.json</code> file that has a small subset of the data we get back from the providers class. Using this stub, I create a unit test for mongodb that saves this data into a test collection and makes sure the data is upserted properly.</p>
<div class="highlight"><pre><code class="python language-python" data-lang="python"><span class="kn">import</span> <span class="nn">unittest</span>
<span class="kn">from</span> <span class="nn">storage.mongodb</span> <span class="kn">import</span> <span class="n">MongoDB</span>
<span class="kn">import</span> <span class="nn">pymongo</span>
<span class="kn">import</span> <span class="nn">json</span>
<span class="kn">import</span> <span class="nn">yaml</span>


<span class="k">class</span> <span class="nc">MongoTest</span><span class="p">(</span><span class="n">unittest</span><span class="o">.</span><span class="n">TestCase</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">setUp</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">config</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s">&quot;unit_test_collection&quot;</span><span class="p">:</span> <span class="s">&quot;testing&quot;</span>
        <span class="p">}</span>
        <span class="c">#get the configuration</span>
        <span class="n">configs</span> <span class="o">=</span> <span class="n">yaml</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="nb">open</span><span class="p">(</span><span class="s">&#39;config.yaml&#39;</span><span class="p">))[</span><span class="s">&#39;storage_configs&#39;</span><span class="p">][</span><span class="s">&quot;MongoDB&quot;</span><span class="p">]</span>
        <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">configs</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="p">[</span><span class="n">item</span><span class="p">]</span> <span class="o">=</span> <span class="n">configs</span><span class="p">[</span><span class="n">item</span><span class="p">]</span>

        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s">&#39;test/stubs/collected_courses.json&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
            <span class="n">data</span> <span class="o">=</span> <span class="n">f</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">courses</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>

        <span class="n">mongodb</span> <span class="o">=</span> <span class="n">pymongo</span><span class="o">.</span><span class="n">MongoClient</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">mongo</span> <span class="o">=</span> <span class="n">mongodb</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="p">[</span><span class="s">&#39;db&#39;</span><span class="p">]]</span>

        <span class="c">#drop the unit_test collection</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">mongo</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="p">[</span><span class="s">&#39;unit_test_collection&#39;</span><span class="p">]]</span><span class="o">.</span><span class="n">drop</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">test_input</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">mDB</span> <span class="o">=</span> <span class="n">MongoDB</span><span class="p">()</span>
        <span class="c">#overide to testing collection</span>
        <span class="n">mDB</span><span class="o">.</span><span class="n">set_collection</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="p">[</span><span class="s">&quot;unit_test_collection&quot;</span><span class="p">])</span>
        <span class="n">mDB</span><span class="o">.</span><span class="n">store_courses</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">courses</span><span class="p">)</span>

        <span class="c">#now check the results</span>
        <span class="n">count</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">mongo</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="p">[</span><span class="s">&quot;unit_test_collection&quot;</span><span class="p">]]</span><span class="o">.</span><span class="n">count</span><span class="p">()</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">assertEquals</span><span class="p">(</span><span class="n">count</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span>

    <span class="c">#reinsert and make sure it still equals 10</span>
    <span class="k">def</span> <span class="nf">test_updates</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">test_input</span><span class="p">()</span>

    <span class="c">#make a change to a few records and make sure the data is changed</span>
    <span class="k">def</span> <span class="nf">test_changes</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">courses</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="s">&quot;short_description&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s">&quot;A new short description&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">courses</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="s">&quot;providers_id&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s">&quot;unittests&quot;</span>

        <span class="c">#reenter the data</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">test_input</span><span class="p">()</span>

        <span class="c">#check for test_updates</span>
        <span class="n">course</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">mongo</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="p">[</span><span class="s">&quot;unit_test_collection&quot;</span><span class="p">]]</span><span class="o">.</span><span class="n">find</span><span class="p">({</span><span class="s">&quot;id&quot;</span><span class="p">:</span> <span class="s">&quot;daf1d740782b94d750502fcb18a284fa&quot;</span><span class="p">})</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEquals</span><span class="p">(</span><span class="n">course</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="s">&quot;short_description&quot;</span><span class="p">],</span> <span class="s">&quot;A new short description&quot;</span><span class="p">)</span>

        <span class="c">#check for test_updates</span>
        <span class="n">course</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">mongo</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="p">[</span><span class="s">&quot;unit_test_collection&quot;</span><span class="p">]]</span><span class="o">.</span><span class="n">find</span><span class="p">({</span><span class="s">&quot;id&quot;</span><span class="p">:</span> <span class="s">&quot;d114184968727a76272e32f6e4417e78&quot;</span><span class="p">})</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEquals</span><span class="p">(</span><span class="n">course</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="s">&quot;providers_id&quot;</span><span class="p">],</span> <span class="s">&quot;unittests&quot;</span><span class="p">)</span>

        <span class="c">#make sure we still have 10 records</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEquals</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">mongo</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="p">[</span><span class="s">&quot;unit_test_collection&quot;</span><span class="p">]]</span><span class="o">.</span><span class="n">count</span><span class="p">(),</span> <span class="mi">10</span><span class="p">)</span>
</code></pre></div>
<p>After running the unit test I can go into mongodb and look at the data in the unit_test collection.</p>
<div class="highlight"><pre><code class="bash language-bash" data-lang="bash"><span class="o">[</span>Brett@bretts-mac-mini:~/src/published_blog <span class="o">(</span>master<span class="o">)]</span><span class="nv">$ </span>mongo
MongoDB shell version: 2.2.2
connecting to: <span class="nb">test</span>
&gt; show dbs
wisdom  0.203125GB
&gt; use wisdom
switched to db wisdom
&gt; show collections
courses
system.indexes
unit_tests
&gt; db.unit_tests.count<span class="o">()</span>
10
&gt; db.unit_tests.findOne<span class="o">()</span>
<span class="o">{</span>
    <span class="s2">&quot;_id&quot;</span> : ObjectId<span class="o">(</span><span class="s2">&quot;533cc8ab61d30a89d1d279ae&quot;</span><span class="o">)</span>,
    <span class="s2">&quot;workload&quot;</span> : <span class="s2">&quot;8-10 hours/week, 10-20 hours/week with programming assignments&quot;</span>,
    <span class="s2">&quot;course_name&quot;</span> : <span class="s2">&quot;Compilers&quot;</span>,
    <span class="s2">&quot;language&quot;</span> : <span class="s2">&quot;english&quot;</span>,
    <span class="s2">&quot;sessions&quot;</span> : <span class="o">[</span>
        <span class="o">{</span>
            <span class="s2">&quot;duration&quot;</span> : <span class="s2">&quot;10 weeks&quot;</span>,
            <span class="s2">&quot;provider_session_id&quot;</span> : 76,
            <span class="s2">&quot;start_date&quot;</span> : <span class="s2">&quot;20120423&quot;</span>
        <span class="o">}</span>,
        <span class="o">{</span>
            <span class="s2">&quot;duration&quot;</span> : <span class="s2">&quot;11 weeks&quot;</span>,
            <span class="s2">&quot;provider_session_id&quot;</span> : 150,
            <span class="s2">&quot;start_date&quot;</span> : <span class="s2">&quot;20121001&quot;</span>
        <span class="o">}</span>,
        <span class="o">{</span>
            <span class="s2">&quot;duration&quot;</span> : <span class="s2">&quot;11 weeks&quot;</span>,
            <span class="s2">&quot;provider_session_id&quot;</span> : 970514,
            <span class="s2">&quot;start_date&quot;</span> : <span class="s2">&quot;20130211&quot;</span>
        <span class="o">}</span>,
        <span class="o">{</span>
            <span class="s2">&quot;duration&quot;</span> : <span class="s2">&quot;11 weeks&quot;</span>,
            <span class="s2">&quot;provider_session_id&quot;</span> : 972209,
            <span class="s2">&quot;start_date&quot;</span> : <span class="s2">&quot;20140317&quot;</span>
        <span class="o">}</span>
    <span class="o">]</span>,
    <span class="s2">&quot;media&quot;</span> : <span class="o">{</span>
        <span class="s2">&quot;icon_url&quot;</span> : <span class="s2">&quot;https://s3.amazonaws.com/coursera/topics/compilers/large-icon.png&quot;</span>,
        <span class="s2">&quot;video_id&quot;</span> : <span class="s2">&quot;sm0QQO-WZlM&quot;</span>,
        <span class="s2">&quot;video_url&quot;</span> : <span class="s2">&quot;https://d1a2y8pfnfh44t.cloudfront.net/sm0QQO-WZlM/&quot;</span>,
        <span class="s2">&quot;video_type&quot;</span> : <span class="s2">&quot;mp4&quot;</span>,
        <span class="s2">&quot;photo_url&quot;</span> : <span class="s2">&quot;https://s3.amazonaws.com/coursera/topics/compilers/large-icon.png&quot;</span>
    <span class="o">}</span>,
    <span class="s2">&quot;providers_id&quot;</span> : <span class="s2">&quot;compilers&quot;</span>,
    <span class="s2">&quot;tags&quot;</span> : <span class="o">[</span>
        <span class="s2">&quot;Computer Science: Systems &amp; Security&quot;</span>,
        <span class="s2">&quot;Computer Science: Software Engineering&quot;</span>
    <span class="o">]</span>,
    <span class="s2">&quot;institution&quot;</span> : <span class="o">{</span>
        <span class="s2">&quot;website&quot;</span> : <span class="s2">&quot;http://online.stanford.edu/&quot;</span>,
        <span class="s2">&quot;city&quot;</span> : <span class="s2">&quot;Palo Alto&quot;</span>,
        <span class="s2">&quot;name&quot;</span> : <span class="s2">&quot;Stanford University&quot;</span>,
        <span class="s2">&quot;country&quot;</span> : <span class="s2">&quot;US&quot;</span>,
        <span class="s2">&quot;state&quot;</span> : <span class="s2">&quot;CA&quot;</span>,
        <span class="s2">&quot;logo_url&quot;</span> : <span class="s2">&quot;https://coursera-university-assets.s3.amazonaws.com/d8/4c69670e0826e42c6cd80b4a02b9a2/stanford.png&quot;</span>,
        <span class="s2">&quot;id&quot;</span> : <span class="s2">&quot;269fc60adb004b0b719031a97aedf5e9&quot;</span>,
        <span class="s2">&quot;description&quot;</span> : <span class="s2">&quot;The Leland Stanford Junior University, commonly referred to as Stanford University or Stanford, is an American private research university located in Stanford, California on an 8,180-acre (3,310 ha) campus near Palo Alto, California, United States.&quot;</span>
    <span class="o">}</span>,
    <span class="s2">&quot;full_description&quot;</span> : <span class="s2">&quot;&lt;p&gt;This course will discuss the major ideas used today in the implementation of programming language compilers, including lexical analysis, parsing, syntax-directed translation, abstract syntax trees, types and type checking, intermediate languages, dataflow analysis, program optimization, code generation, and runtime systems. As a result, you will learn how a program written in a high-level language designed for humans is systematically translated into a program written in low-level assembly more suited to machines. Along the way we will also touch on how programming languages are designed, programming language semantics, and why there are so many different kinds of programming languages.&lt;/p&gt;\n&lt;p&gt;The course lectures will be presented in short videos. To help you master the material, there will be in-lecture questions to answer, quizzes, and two exams: a midterm and a final. There will also be homework in the form of exercises that ask you to show a sequence of logical steps needed to derive a specific result, such as the sequence of steps a type checker would perform to type check a piece of code, or the sequence of steps a parser would perform to parse an input string. This checking technology is the result of ongoing research at Stanford into developing innovative tools for education, and we&#39;re excited to be the first course ever to make it available to students.&lt;/p&gt;\nAn optional course project is to write a complete compiler for COOL, the Classroom Object Oriented Language. COOL has the essential features of a realistic programming language, but is small and simple enough that it can be implemented in a few thousand lines of code. Students who choose to do the project can implement it in either C++ or Java.&lt;br&gt;I hope you enjoy the course!\n&lt;p&gt;&lt;strong&gt;Why Study Compilers?&lt;/strong&gt;&lt;/p&gt;\nEverything that computers do is the result of some program, and all of the millions of programs in the world are written in one of the many thousands of programming languages that have been developed over the last 60 years. Designing and implementing a programming language turns out to be difficult; some of the best minds in computer science have thought about the problems involved and contributed beautiful and deep results. Learning something about compilers will show you the interplay of theory and practice in computer science, especially how powerful general ideas combined with engineering insight can lead to practical solutions to very hard problems. Knowing how a compiler works will also make you a better programmer and increase your ability to learn new programming languages quickly.\n&lt;div&gt;&lt;/div&gt;&quot;</span>,
    <span class="s2">&quot;provider&quot;</span> : <span class="s2">&quot;coursera&quot;</span>,
    <span class="s2">&quot;short_description&quot;</span> : <span class="s2">&quot;This course will discuss the major ideas used today in the implementation of programming language compilers. You will learn how a program written in a high-level language designed for humans is systematically translated into a program written in low-level assembly more suited to machines!&quot;</span>,
    <span class="s2">&quot;course_url&quot;</span> : <span class="s2">&quot;http://class.coursera.org/compilers/&quot;</span>,
    <span class="s2">&quot;instructor&quot;</span> : <span class="s2">&quot;Alex Aiken, Professor&quot;</span>,
    <span class="s2">&quot;id&quot;</span> : <span class="s2">&quot;d114184968727a76272e32f6e4417e78&quot;</span>,
    <span class="s2">&quot;categories&quot;</span> : <span class="o">[</span>
        <span class="o">{</span>
            <span class="s2">&quot;id&quot;</span> : 11,
            <span class="s2">&quot;name&quot;</span> : <span class="s2">&quot;Computer Science: Systems &amp; Security&quot;</span>,
            <span class="s2">&quot;mailing_list_id&quot;</span> : null,
            <span class="s2">&quot;short_name&quot;</span> : <span class="s2">&quot;cs-systems&quot;</span>,
            <span class="s2">&quot;description&quot;</span> : <span class="s2">&quot;Our wide range of courses allows students to explore topics from many different fields of study. Sign up for a class today and join our global community of students and scholars!&quot;</span>
        <span class="o">}</span>,
        <span class="o">{</span>
            <span class="s2">&quot;id&quot;</span> : 12,
            <span class="s2">&quot;name&quot;</span> : <span class="s2">&quot;Computer Science: Software Engineering&quot;</span>,
            <span class="s2">&quot;mailing_list_id&quot;</span> : null,
            <span class="s2">&quot;short_name&quot;</span> : <span class="s2">&quot;cs-programming&quot;</span>,
            <span class="s2">&quot;description&quot;</span> : <span class="s2">&quot;Our wide range of courses allows students to explore topics from many different fields of study. Sign up for a class today and join our global community of students and scholars!&quot;</span>
        <span class="o">}</span>
    <span class="o">]</span>
<span class="o">}</span>
&gt;
</code></pre></div>
<h3>Saving to a relational database</h3>

<p>In addition to mongodb, I also wanted to save the data to a relational database as the data is naturally relational.  I choose to use the ORM SQL Alchemy as the data should be very simple to model and this will allow me the flexibility to use any major SQL implementation.  I decided to use postgres, but switching to mysql should be a simple single line change.</p>

<p>While mongo was a very easy implementation the SQL version is more complex as we need to setup the schema.  Fortunately SQL ALchemy makes this very simple. In the <code>storage</code> folder I created a <code>sql_setup</code> folder that has the one off scripts to run to setup the schemas. </p>

<p>Here is the <code>db_setup.py</code> script that creates the schema.</p>
<div class="highlight"><pre><code class="python language-python" data-lang="python"><span class="kn">from</span> <span class="nn">sqlalchemy</span> <span class="kn">import</span> <span class="n">Column</span><span class="p">,</span> <span class="n">ForeignKey</span><span class="p">,</span> <span class="n">Date</span><span class="p">,</span> <span class="n">String</span><span class="p">,</span> <span class="n">Text</span><span class="p">,</span> <span class="n">Integer</span><span class="p">,</span> <span class="n">Table</span>
<span class="kn">from</span> <span class="nn">sqlalchemy.ext.declarative</span> <span class="kn">import</span> <span class="n">declarative_base</span>
<span class="kn">from</span> <span class="nn">sqlalchemy.orm</span> <span class="kn">import</span> <span class="n">relationship</span>
<span class="kn">from</span> <span class="nn">sqlalchemy</span> <span class="kn">import</span> <span class="n">create_engine</span>
<span class="kn">import</span> <span class="nn">yaml</span>


<span class="k">def</span> <span class="nf">get_settings</span><span class="p">():</span>
    <span class="n">config</span> <span class="o">=</span> <span class="n">yaml</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="nb">open</span><span class="p">(</span><span class="s">&#39;config.yaml&#39;</span><span class="p">))</span>
    <span class="k">return</span> <span class="n">config</span><span class="p">[</span><span class="s">&#39;storage_configs&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s">&quot;SQL&quot;</span><span class="p">,</span> <span class="bp">None</span><span class="p">)</span>

<span class="n">Base</span> <span class="o">=</span> <span class="n">declarative_base</span><span class="p">()</span>


<span class="n">course_tag_association_table</span> <span class="o">=</span> <span class="n">Table</span><span class="p">(</span>
    <span class="s">&#39;course_tag_association&#39;</span><span class="p">,</span>
    <span class="n">Base</span><span class="o">.</span><span class="n">metadata</span><span class="p">,</span>
    <span class="n">Column</span><span class="p">(</span><span class="s">&#39;course_id&#39;</span><span class="p">,</span> <span class="n">String</span><span class="p">(</span><span class="mi">50</span><span class="p">),</span> <span class="n">ForeignKey</span><span class="p">(</span><span class="s">&#39;course.id&#39;</span><span class="p">)),</span>
    <span class="n">Column</span><span class="p">(</span><span class="s">&#39;tag_id&#39;</span><span class="p">,</span> <span class="n">Integer</span><span class="p">,</span> <span class="n">ForeignKey</span><span class="p">(</span><span class="s">&#39;tag.id&#39;</span><span class="p">))</span>
<span class="p">)</span>

<span class="n">course_category_association_table</span> <span class="o">=</span> <span class="n">Table</span><span class="p">(</span>
    <span class="s">&#39;course_category_association&#39;</span><span class="p">,</span>
    <span class="n">Base</span><span class="o">.</span><span class="n">metadata</span><span class="p">,</span>
    <span class="n">Column</span><span class="p">(</span><span class="s">&#39;course_id&#39;</span><span class="p">,</span> <span class="n">String</span><span class="p">(</span><span class="mi">50</span><span class="p">),</span> <span class="n">ForeignKey</span><span class="p">(</span><span class="s">&#39;course.id&#39;</span><span class="p">)),</span>
    <span class="n">Column</span><span class="p">(</span><span class="s">&#39;category_id&#39;</span><span class="p">,</span> <span class="n">Integer</span><span class="p">,</span> <span class="n">ForeignKey</span><span class="p">(</span><span class="s">&#39;category.id&#39;</span><span class="p">))</span>
<span class="p">)</span>


<span class="k">class</span> <span class="nc">Institution</span><span class="p">(</span><span class="n">Base</span><span class="p">):</span>
    <span class="n">__tablename__</span> <span class="o">=</span> <span class="s">&#39;institution&#39;</span>
    <span class="c"># Here we define columns for the table address.</span>
    <span class="c"># Notice that each column is also a normal Python instance attribute.</span>
    <span class="nb">id</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span><span class="n">String</span><span class="p">(</span><span class="mi">50</span><span class="p">),</span> <span class="n">primary_key</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
    <span class="n">name</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span><span class="n">String</span><span class="p">(</span><span class="mi">250</span><span class="p">),</span> <span class="n">nullable</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
    <span class="n">description</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span><span class="n">Text</span><span class="p">)</span>
    <span class="n">website</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span><span class="n">String</span><span class="p">(</span><span class="mi">250</span><span class="p">))</span>
    <span class="n">logo_url</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span><span class="n">String</span><span class="p">(</span><span class="mi">250</span><span class="p">))</span>
    <span class="n">city</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span><span class="n">String</span><span class="p">(</span><span class="mi">250</span><span class="p">))</span>
    <span class="n">state</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span><span class="n">String</span><span class="p">(</span><span class="mi">250</span><span class="p">))</span>
    <span class="n">country</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span><span class="n">String</span><span class="p">(</span><span class="mi">250</span><span class="p">))</span>


<span class="k">class</span> <span class="nc">Course</span><span class="p">(</span><span class="n">Base</span><span class="p">):</span>
    <span class="n">__tablename__</span> <span class="o">=</span> <span class="s">&quot;course&quot;</span>
    <span class="nb">id</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span><span class="n">String</span><span class="p">(</span><span class="mi">50</span><span class="p">),</span> <span class="n">primary_key</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
    <span class="n">name</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span><span class="n">String</span><span class="p">(</span><span class="mi">250</span><span class="p">),</span> <span class="n">nullable</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
    <span class="n">language</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span><span class="n">String</span><span class="p">(</span><span class="mi">250</span><span class="p">))</span>
    <span class="n">instructor</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span><span class="n">String</span><span class="p">(</span><span class="mi">250</span><span class="p">))</span>
    <span class="n">providers_id</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span><span class="n">String</span><span class="p">(</span><span class="mi">50</span><span class="p">),</span> <span class="n">nullable</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
    <span class="n">short_description</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span><span class="n">Text</span><span class="p">)</span>
    <span class="n">full_description</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span><span class="n">Text</span><span class="p">)</span>
    <span class="n">course_url</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span><span class="n">String</span><span class="p">(</span><span class="mi">250</span><span class="p">))</span>
    <span class="n">workload</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span><span class="n">String</span><span class="p">(</span><span class="mi">250</span><span class="p">))</span>
    <span class="n">institution_id</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span><span class="n">String</span><span class="p">(</span><span class="mi">50</span><span class="p">),</span> <span class="n">ForeignKey</span><span class="p">(</span><span class="s">&#39;institution.id&#39;</span><span class="p">))</span>
    <span class="n">institution</span> <span class="o">=</span> <span class="n">relationship</span><span class="p">(</span><span class="n">Institution</span><span class="p">)</span>
    <span class="n">tags</span> <span class="o">=</span> <span class="n">relationship</span><span class="p">(</span><span class="s">&quot;Tag&quot;</span><span class="p">,</span> <span class="n">secondary</span><span class="o">=</span><span class="n">course_tag_association_table</span><span class="p">)</span>
    <span class="n">categories</span> <span class="o">=</span> <span class="n">relationship</span><span class="p">(</span><span class="s">&quot;Category&quot;</span><span class="p">,</span> <span class="n">secondary</span><span class="o">=</span><span class="n">course_category_association_table</span><span class="p">)</span>


<span class="k">class</span> <span class="nc">Session</span><span class="p">(</span><span class="n">Base</span><span class="p">):</span>
    <span class="n">__tablename__</span> <span class="o">=</span> <span class="s">&quot;session&quot;</span>
    <span class="nb">id</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span><span class="n">Integer</span><span class="p">,</span> <span class="n">primary_key</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
    <span class="n">course_id</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span><span class="n">String</span><span class="p">(</span><span class="mi">50</span><span class="p">),</span> <span class="n">ForeignKey</span><span class="p">(</span><span class="s">&#39;course.id&#39;</span><span class="p">))</span>
    <span class="n">course</span> <span class="o">=</span> <span class="n">relationship</span><span class="p">(</span><span class="n">Course</span><span class="p">)</span>
    <span class="n">duration</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span><span class="n">String</span><span class="p">(</span><span class="mi">250</span><span class="p">))</span>
    <span class="n">start_date</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span><span class="n">Date</span><span class="p">)</span>


<span class="k">class</span> <span class="nc">Media</span><span class="p">(</span><span class="n">Base</span><span class="p">):</span>
    <span class="n">__tablename__</span> <span class="o">=</span> <span class="s">&quot;media&quot;</span>
    <span class="nb">id</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span><span class="n">Integer</span><span class="p">,</span> <span class="n">primary_key</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
    <span class="n">course_id</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span><span class="n">String</span><span class="p">(</span><span class="mi">50</span><span class="p">),</span> <span class="n">ForeignKey</span><span class="p">(</span><span class="s">&#39;course.id&#39;</span><span class="p">))</span>
    <span class="n">course</span> <span class="o">=</span> <span class="n">relationship</span><span class="p">(</span><span class="n">Course</span><span class="p">)</span>
    <span class="n">photo_url</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span><span class="n">String</span><span class="p">(</span><span class="mi">250</span><span class="p">))</span>
    <span class="n">icon_url</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span><span class="n">String</span><span class="p">(</span><span class="mi">250</span><span class="p">))</span>
    <span class="n">video_url</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span><span class="n">String</span><span class="p">(</span><span class="mi">250</span><span class="p">))</span>
    <span class="n">video_type</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span><span class="n">String</span><span class="p">(</span><span class="mi">20</span><span class="p">))</span>
    <span class="n">video_id</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span><span class="n">String</span><span class="p">(</span><span class="mi">50</span><span class="p">))</span>


<span class="k">class</span> <span class="nc">Tag</span><span class="p">(</span><span class="n">Base</span><span class="p">):</span>
    <span class="n">__tablename__</span> <span class="o">=</span> <span class="s">&quot;tag&quot;</span>
    <span class="nb">id</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span><span class="n">Integer</span><span class="p">,</span> <span class="n">primary_key</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
    <span class="n">tag</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span><span class="n">String</span><span class="p">(</span><span class="mi">50</span><span class="p">),</span> <span class="n">unique</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">nullable</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>


<span class="k">class</span> <span class="nc">Category</span><span class="p">(</span><span class="n">Base</span><span class="p">):</span>
    <span class="n">__tablename__</span> <span class="o">=</span> <span class="s">&quot;category&quot;</span>
    <span class="nb">id</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span><span class="n">Integer</span><span class="p">,</span> <span class="n">primary_key</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
    <span class="n">name</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span><span class="n">String</span><span class="p">(</span><span class="mi">250</span><span class="p">),</span> <span class="n">unique</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">nullable</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
    <span class="n">description</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span><span class="n">Text</span><span class="p">)</span>

<span class="c"># Create an engine that stores data in the local directory&#39;s</span>
<span class="c"># sqlalchemy_example.db file.</span>
<span class="n">engine</span> <span class="o">=</span> <span class="n">create_engine</span><span class="p">(</span><span class="n">get_settings</span><span class="p">()[</span><span class="s">&#39;connection_string&#39;</span><span class="p">])</span>

<span class="c"># Create all tables in the engine. This is equivalent to &quot;Create Table&quot;</span>
<span class="c"># statements in raw SQL.</span>
<span class="n">Base</span><span class="o">.</span><span class="n">metadata</span><span class="o">.</span><span class="n">create_all</span><span class="p">(</span><span class="n">engine</span><span class="p">)</span>
</code></pre></div>
<p>It should be pretty simple to follow, however if you don&#39;t have any experience with ORMs and SQL Alchemy <a href="http://docs.sqlalchemy.org/en/rel_0_9/orm/tutorial.html">start here</a>.  To create a schema, assuming you have your sql implementation installed and running, simply edit the connection_string statement in the <code>config.yaml</code> file.</p>
<div class="highlight"><pre><code class="yaml language-yaml" data-lang="yaml"><span class="c1">#configure the wisdom system</span>
<span class="l-Scalar-Plain">providers</span><span class="p-Indicator">:</span> <span class="p-Indicator">[</span><span class="nv">Coursera</span><span class="p-Indicator">]</span>
<span class="l-Scalar-Plain">storage_engines</span><span class="p-Indicator">:</span> <span class="p-Indicator">[</span><span class="nv">SQL</span><span class="p-Indicator">,</span> <span class="nv">MongoDB</span><span class="p-Indicator">]</span>

<span class="l-Scalar-Plain">storage_configs</span><span class="p-Indicator">:</span>
    <span class="l-Scalar-Plain">MongoDB</span><span class="p-Indicator">:</span>
        <span class="l-Scalar-Plain">db</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">wisdom</span>
        <span class="l-Scalar-Plain">unit_test_collection</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">unit_tests</span>
    <span class="l-Scalar-Plain">SQL</span><span class="p-Indicator">:</span>
        <span class="l-Scalar-Plain">connection_string</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">postgresql://wisdom_backend:wisdom_backend@localhost/wisdom</span>
</code></pre></div>
<p>Then run the db_setup.py script from the project root (since the yaml file is in the root).</p>

<p>Now that the schema is setup, we can create the SQL engine to save the courses.  In our storage engine we need to import the table Classes from the db_setup file like this:</p>
<div class="highlight"><pre><code class="python language-python" data-lang="python"><span class="kn">from</span> <span class="nn">sql_setup.db_setup</span> <span class="kn">import</span> <span class="n">Institution</span><span class="p">,</span> <span class="n">Base</span><span class="p">,</span> <span class="n">Course</span><span class="p">,</span> <span class="n">Session</span><span class="p">,</span> <span class="n">Media</span><span class="p">,</span> <span class="n">Tag</span><span class="p">,</span> <span class="n">Category</span>
</code></pre></div>
<p>We also want to inherit the StorageBase and implement the store_courses() method. The implementation is simply a matter of mapping the JSON from our providers to the fields in each table.  We also use the <code>session.merge</code> function to upsert the data so we don&#39;t create duplicates if we run the import weekly.</p>

<p>Here is the final SQL storage implementation.</p>
<div class="highlight"><pre><code class="python language-python" data-lang="python"><span class="kn">from</span> <span class="nn">sqlalchemy.engine</span> <span class="kn">import</span> <span class="n">create_engine</span>
<span class="kn">from</span> <span class="nn">sqlalchemy.orm</span> <span class="kn">import</span> <span class="n">sessionmaker</span>
<span class="kn">from</span> <span class="nn">sql_setup.db_setup</span> <span class="kn">import</span> <span class="n">Institution</span><span class="p">,</span> <span class="n">Base</span><span class="p">,</span> <span class="n">Course</span><span class="p">,</span> <span class="n">Session</span><span class="p">,</span> <span class="n">Media</span><span class="p">,</span> <span class="n">Tag</span><span class="p">,</span> <span class="n">Category</span>
<span class="kn">from</span> <span class="nn">datetime</span> <span class="kn">import</span> <span class="n">datetime</span>
<span class="kn">from</span> <span class="nn">storage</span> <span class="kn">import</span> <span class="n">StorageBase</span>


<span class="k">class</span> <span class="nc">SQL</span><span class="p">(</span><span class="n">StorageBase</span><span class="p">):</span>
    <span class="c">#do not override here, place this in the YAML configuration config.yaml</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">config</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_config</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__class__</span><span class="o">.</span><span class="n">__name__</span><span class="p">)</span>  <span class="c"># call the super init method to get config</span>

        <span class="n">engine</span> <span class="o">=</span> <span class="n">create_engine</span><span class="p">(</span><span class="n">config</span><span class="p">[</span><span class="s">&#39;connection_string&#39;</span><span class="p">])</span>
        <span class="c"># Bind the engine to the metadata of the Base class so that the</span>
        <span class="c"># declaratives can be accessed through a instance</span>
        <span class="n">Base</span><span class="o">.</span><span class="n">metadata</span><span class="o">.</span><span class="n">bind</span> <span class="o">=</span> <span class="n">engine</span>

        <span class="n">DBSession</span> <span class="o">=</span> <span class="n">sessionmaker</span><span class="p">(</span><span class="n">bind</span><span class="o">=</span><span class="n">engine</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">session</span> <span class="o">=</span> <span class="n">DBSession</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">store_courses</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">courses</span><span class="p">):</span>
        <span class="n">session</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">session</span>
        <span class="c">#we can&#39;t bulk upsert so lets loop and upsert</span>
        <span class="k">for</span> <span class="n">course</span> <span class="ow">in</span> <span class="n">courses</span><span class="p">:</span>

            <span class="n">i</span> <span class="o">=</span> <span class="n">course</span><span class="p">[</span><span class="s">&#39;institution&#39;</span><span class="p">]</span>
            <span class="n">new_institution</span> <span class="o">=</span> <span class="n">Institution</span><span class="p">(</span>
                <span class="nb">id</span><span class="o">=</span><span class="n">i</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s">&quot;id&quot;</span><span class="p">),</span>
                <span class="n">name</span><span class="o">=</span><span class="n">i</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s">&quot;name&quot;</span><span class="p">,</span> <span class="s">&quot;None&quot;</span><span class="p">),</span>
                <span class="n">description</span><span class="o">=</span><span class="n">i</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s">&quot;name&quot;</span><span class="p">),</span>
                <span class="n">website</span><span class="o">=</span><span class="n">i</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s">&quot;website&quot;</span><span class="p">),</span>
                <span class="n">logo_url</span><span class="o">=</span><span class="n">i</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s">&quot;logo_url&quot;</span><span class="p">),</span>
                <span class="n">city</span><span class="o">=</span><span class="n">i</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s">&quot;city&quot;</span><span class="p">),</span>
                <span class="n">state</span><span class="o">=</span><span class="n">i</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s">&quot;state&quot;</span><span class="p">),</span>
                <span class="n">country</span><span class="o">=</span><span class="n">i</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s">&quot;country&quot;</span><span class="p">)</span>
            <span class="p">)</span>

            <span class="n">new_institution</span> <span class="o">=</span> <span class="n">session</span><span class="o">.</span><span class="n">merge</span><span class="p">(</span><span class="n">new_institution</span><span class="p">)</span>

            <span class="n">session</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">new_institution</span><span class="p">)</span>
            <span class="n">session</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span>

            <span class="n">new_course</span> <span class="o">=</span> <span class="n">Course</span><span class="p">(</span>
                <span class="nb">id</span><span class="o">=</span><span class="n">course</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s">&quot;id&quot;</span><span class="p">),</span>
                <span class="n">name</span><span class="o">=</span><span class="n">course</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s">&quot;course_name&quot;</span><span class="p">),</span>
                <span class="n">language</span><span class="o">=</span><span class="n">course</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s">&quot;language&quot;</span><span class="p">),</span>
                <span class="n">instructor</span><span class="o">=</span><span class="n">course</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s">&quot;instructor&quot;</span><span class="p">),</span>
                <span class="n">providers_id</span><span class="o">=</span><span class="n">course</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s">&quot;providers_id&quot;</span><span class="p">),</span>
                <span class="n">short_description</span><span class="o">=</span><span class="n">course</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s">&quot;short_description&quot;</span><span class="p">),</span>
                <span class="n">full_description</span><span class="o">=</span><span class="n">course</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s">&quot;full_description&quot;</span><span class="p">),</span>
                <span class="n">course_url</span><span class="o">=</span><span class="n">course</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s">&quot;course_url&quot;</span><span class="p">),</span>
                <span class="n">workload</span><span class="o">=</span><span class="n">course</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s">&quot;workload&quot;</span><span class="p">),</span>
                <span class="n">institution</span><span class="o">=</span><span class="n">new_institution</span>
            <span class="p">)</span>

            <span class="n">new_course</span> <span class="o">=</span> <span class="n">session</span><span class="o">.</span><span class="n">merge</span><span class="p">(</span><span class="n">new_course</span><span class="p">)</span>
            <span class="n">session</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">new_course</span><span class="p">)</span>
            <span class="n">session</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span>

            <span class="k">for</span> <span class="n">s</span> <span class="ow">in</span> <span class="n">course</span><span class="p">[</span><span class="s">&#39;sessions&#39;</span><span class="p">]:</span>
                <span class="n">new_session</span> <span class="o">=</span> <span class="n">Session</span><span class="p">(</span>
                    <span class="nb">id</span><span class="o">=</span><span class="n">s</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s">&quot;provider_session_id&quot;</span><span class="p">),</span>
                    <span class="n">duration</span><span class="o">=</span><span class="n">s</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s">&quot;duration&quot;</span><span class="p">,</span> <span class="bp">None</span><span class="p">),</span>
                    <span class="n">start_date</span><span class="o">=</span><span class="n">datetime</span><span class="o">.</span><span class="n">strptime</span><span class="p">(</span><span class="n">s</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s">&quot;start_date&quot;</span><span class="p">),</span> <span class="s">&quot;%Y%m</span><span class="si">%d</span><span class="s">&quot;</span><span class="p">),</span>
                    <span class="n">course</span><span class="o">=</span><span class="n">new_course</span>
                <span class="p">)</span>

                <span class="n">new_session</span> <span class="o">=</span> <span class="n">session</span><span class="o">.</span><span class="n">merge</span><span class="p">(</span><span class="n">new_session</span><span class="p">)</span>
                <span class="n">session</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">new_session</span><span class="p">)</span>
                <span class="n">session</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span>

            <span class="n">media</span> <span class="o">=</span> <span class="n">course</span><span class="p">[</span><span class="s">&#39;media&#39;</span><span class="p">]</span>
            <span class="n">new_media</span> <span class="o">=</span> <span class="n">session</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="n">Media</span><span class="p">)</span><span class="o">.</span><span class="n">filter_by</span><span class="p">(</span><span class="n">course</span><span class="o">=</span><span class="n">new_course</span><span class="p">)</span><span class="o">.</span><span class="n">first</span><span class="p">()</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">new_media</span><span class="p">:</span>
                <span class="n">new_media</span> <span class="o">=</span> <span class="n">Media</span><span class="p">(</span>
                    <span class="n">course</span><span class="o">=</span><span class="n">new_course</span><span class="p">,</span>
                    <span class="n">photo_url</span><span class="o">=</span><span class="n">media</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s">&quot;photo_url&quot;</span><span class="p">,</span> <span class="bp">None</span><span class="p">),</span>
                    <span class="n">video_url</span><span class="o">=</span><span class="n">media</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s">&quot;video_url&quot;</span><span class="p">,</span> <span class="bp">None</span><span class="p">),</span>
                    <span class="n">video_type</span><span class="o">=</span><span class="n">media</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s">&quot;video_type&quot;</span><span class="p">,</span> <span class="bp">None</span><span class="p">),</span>
                    <span class="n">video_id</span><span class="o">=</span><span class="n">media</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s">&quot;video_id&quot;</span><span class="p">,</span> <span class="bp">None</span><span class="p">),</span>
                    <span class="n">icon_url</span><span class="o">=</span><span class="n">media</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s">&quot;icon_url&quot;</span><span class="p">,</span> <span class="bp">None</span><span class="p">)</span>
                <span class="p">)</span>
            <span class="n">session</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">new_media</span><span class="p">)</span>
            <span class="n">session</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span>

            <span class="k">for</span> <span class="n">t</span> <span class="ow">in</span> <span class="n">course</span><span class="p">[</span><span class="s">&#39;tags&#39;</span><span class="p">]:</span>
                <span class="n">new_tag</span> <span class="o">=</span> <span class="n">session</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="n">Tag</span><span class="p">)</span><span class="o">.</span><span class="n">filter_by</span><span class="p">(</span><span class="n">tag</span><span class="o">=</span><span class="n">t</span><span class="p">)</span><span class="o">.</span><span class="n">first</span><span class="p">()</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="n">new_tag</span><span class="p">:</span>
                    <span class="n">new_tag</span> <span class="o">=</span> <span class="n">Tag</span><span class="p">(</span><span class="n">tag</span><span class="o">=</span><span class="n">t</span><span class="p">)</span>
                <span class="n">new_course</span><span class="o">.</span><span class="n">tags</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">new_tag</span><span class="p">)</span>
                <span class="n">session</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span>

            <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">course</span><span class="p">[</span><span class="s">&#39;categories&#39;</span><span class="p">]:</span>
                <span class="n">new_cat</span> <span class="o">=</span> <span class="n">Category</span><span class="p">(</span>
                    <span class="nb">id</span><span class="o">=</span><span class="n">c</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s">&quot;id&quot;</span><span class="p">),</span>
                    <span class="n">name</span><span class="o">=</span><span class="n">c</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s">&quot;name&quot;</span><span class="p">),</span>
                    <span class="n">description</span><span class="o">=</span><span class="n">c</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s">&quot;description&quot;</span><span class="p">,</span> <span class="bp">None</span><span class="p">)</span>
                <span class="p">)</span>
                <span class="n">new_cat</span> <span class="o">=</span> <span class="n">session</span><span class="o">.</span><span class="n">merge</span><span class="p">(</span><span class="n">new_cat</span><span class="p">)</span>
                <span class="n">new_course</span><span class="o">.</span><span class="n">categories</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">new_cat</span><span class="p">)</span>
                <span class="n">session</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span>
</code></pre></div>
<p>After running the import, we can look in our database and see our imported data. Here is a listing of courses at The University of Florida.</p>

<p><img src="/static/img/postgres.png"/></p>

<h2>Project Wisdom Code:</h2>

<p><strong><a class="btn btn-large" href="http://www.github.com/brettdanger"><i class="fa fa-github" target="_blank"></i>&nbsp;&nbsp;Wisdom Backend</a></strong></p>
</div>
<div class="clearfix"></div>
<div id="disqus_thread"></div>
<script type="text/javascript">
    /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
    var disqus_shortname = 'brettdangerblog'; // required: replace example with your forum shortname

    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function () {
        var s = document.createElement('script'); s.async = true;
        s.type = 'text/javascript';
        s.src = 'http://' + disqus_shortname + '.disqus.com/count.js';
        (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
    }());
</script>
  <script type="text/javascript">
      /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
      var disqus_shortname = 'brettdangerblog'; // required: replace example with your forum shortname
      var disqus_url = 'http://www.brettdangerfield.com/post/full_stack_mooc_app_part_1_continued_saving_to_mongodb';
      /* * * DON'T EDIT BELOW THIS LINE * * */
      (function() {
          var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
          dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
          (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
      })();
  </script>
  <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
  <a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
<script type="text/javascript">

</script>


            </div><!--/span-->
            <!-- sidebar here -->
            <div class="col-lg-3 col-md-4 col-sm-4 sidebar">
    <div class="widget-sidebar widget_top-posts">
      <h3>Popular Posts</h3>
      <ul>
        
            
        
            
        
            
        
            
        
            
        
            
            <li>
                <div class="post-wrapper">
                     
                        <div class="post-img" style="background: url(https://cdn.sparkfun.com//assets/parts/6/8/0/5/11215-01.jpg);"></div>
                    
                    <div class="post-text">
                        <div class="post-meta">
                            <span><em>in</em> <a href="/category/programmingelectronics" title="Programming" rel="category tag">Programming</a></span>
                            <span><em>13 Jun 2014</em></span>
                        </div>
                        <div class="heading-title">
                            <h2><a href="/post/raspberrypi_tempature_monitor_project">Building a wireless temperature sensor with a Raspberry Pi and Xbee Wireless modules</a></h2>
                        </div>
                    </div>
                </div>
            </li>
            
        
            
        
            
        
            
            <li>
                <div class="post-wrapper">
                     
                        <div class="post-img" style="background: url(/static/img/tag_cloud.png);"></div>
                    
                    <div class="post-text">
                        <div class="post-meta">
                            <span><em>in</em> <a href="/category/programming" title="Programming" rel="category tag">Programming</a></span>
                            <span><em>01 May 2014</em></span>
                        </div>
                        <div class="heading-title">
                            <h2><a href="/post/realtime_data_tag_cloud">Playing with REALTIME data, Python and D3</a></h2>
                        </div>
                    </div>
                </div>
            </li>
            
        
            
        
            
        
            
            <li>
                <div class="post-wrapper">
                     
                        <div class="post-img" style="background: url(/static/img/mooc_python.png);"></div>
                    
                    <div class="post-text">
                        <div class="post-meta">
                            <span><em>in</em> <a href="/category/programming" title="Programming" rel="category tag">Programming</a></span>
                            <span><em>14 Apr 2014</em></span>
                        </div>
                        <div class="heading-title">
                            <h2><a href="/post/full_stack_mooc_app_part_1_python_backend">Mooc Aggregator Project, Python backend with MongoDB and SQLAlachemy</a></h2>
                        </div>
                    </div>
                </div>
            </li>
            
        
            
        
            
        
            
        
            
        
            
        
            
            <li>
                <div class="post-wrapper">
                     
                        <div class="post-img" style="background: url(http://www.afrobella.com/wp-content/uploads/2012/12/Django-Unchained-wallpapers-1920x1200-2.jpg);"></div>
                    
                    <div class="post-text">
                        <div class="post-meta">
                            <span><em>in</em> <a href="/category/programming" title="Programming" rel="category tag">Programming</a></span>
                            <span><em>04 Jan 2013</em></span>
                        </div>
                        <div class="heading-title">
                            <h2><a href="/post/django_vs_pyramid">Django vs Pyramid - My Comparison</a></h2>
                        </div>
                    </div>
                </div>
            </li>
            
        
            
        
            
        
            
            <li>
                <div class="post-wrapper">
                     
                        <div class="post-img" style="background: url(http://www.pylonsproject.org/static/images/pyramid-small.png);"></div>
                    
                    <div class="post-text">
                        <div class="post-meta">
                            <span><em>in</em> <a href="/category/programming" title="Programming" rel="category tag">Programming</a></span>
                            <span><em>07 Sep 2012</em></span>
                        </div>
                        <div class="heading-title">
                            <h2><a href="/post/creating_a_blog_with_pyramid_mongdb_bootstrap">Creating a blog engine with Python, Pyramid, MongoDB and Twitter Bootstrap</a></h2>
                        </div>
                    </div>
                </div>
            </li>
            
        
            
        
            
         
      </ul>
    </div>

    <div class="widget-sidebar widget_categories">
      <h3>Categories</h3>
      <ul>
        
            <li><a href="/category/programming">Programming</a></li>
        
            <li><a href="/category/personal">Personal</a></li>
        
            <li><a href="/category/fatherhood">Fatherhood</a></li>
        
            <li><a href="/category/sports">Sports</a></li>
        
            <li><a href="/category/technology">Technology</a></li>
        
            <li><a href="/category/electronics">Electronics</a></li>
        
            <li><a href="/category/travel">Travel</a></li>
        
            <li><a href="/category/career">Career</a></li>
        
      </ul>
    </div>

    <div class="widget-sidebar widget_top-posts">
      <h3>Recent Posts</h3>
      <ul>
        
        
        <li>
            <div class="post-wrapper">

                <div class="post-text">
                    <div class="post-meta">
                        <span><em>in</em> <a href="/category/personalcareerprogramming" title="Personal" rel="category tag">Personal</a></span>
                        <span><em>07 Jan 2015</em></span>
                    </div>
                    <div class="heading-title">
                        <h2><a href="/post/2014_career_overview">2014 and My Transition to Engineering Manager</a></h2>
                    </div>
                </div>
            </div>
        </li>
        
        
        
        
        
        
        
        <li>
            <div class="post-wrapper">

                <div class="post-text">
                    <div class="post-meta">
                        <span><em>in</em> <a href="/category/travelfatherhood" title="Travel" rel="category tag">Travel</a></span>
                        <span><em>24 Jun 2014</em></span>
                    </div>
                    <div class="heading-title">
                        <h2><a href="/post/first_rv_trip_mount_rushmore_black_hills">Holiday Road: Trip 1 - Black Hills and Mount Rushmore</a></h2>
                    </div>
                </div>
            </div>
        </li>
        
        
        
        
        
        <li>
            <div class="post-wrapper">

                <div class="post-text">
                    <div class="post-meta">
                        <span><em>in</em> <a href="/category/programmingelectronics" title="Programming" rel="category tag">Programming</a></span>
                        <span><em>13 Jun 2014</em></span>
                    </div>
                    <div class="heading-title">
                        <h2><a href="/post/raspberrypi_tempature_monitor_project">Building a wireless temperature sensor with a Raspberry Pi and Xbee Wireless modules</a></h2>
                    </div>
                </div>
            </div>
        </li>
        
        
        
        
        
        
        
        <li>
            <div class="post-wrapper">

                <div class="post-text">
                    <div class="post-meta">
                        <span><em>in</em> <a href="/category/programming" title="Programming" rel="category tag">Programming</a></span>
                        <span><em>01 May 2014</em></span>
                    </div>
                    <div class="heading-title">
                        <h2><a href="/post/realtime_data_tag_cloud">Playing with REALTIME data, Python and D3</a></h2>
                    </div>
                </div>
            </div>
        </li>
        
        
        
        <li>
            <div class="post-wrapper">

                <div class="post-text">
                    <div class="post-meta">
                        <span><em>in</em> <a href="/category/technology" title="Technology" rel="category tag">Technology</a></span>
                        <span><em>25 Apr 2014</em></span>
                    </div>
                    <div class="heading-title">
                        <h2><a href="/post/replacing_slr_with_compact_mirrorless_samsung_nx300">Replacing my DSLR with a compact mirrorless camera, the NX300</a></h2>
                    </div>
                </div>
            </div>
        </li>
        
        
        
        <li>
            <div class="post-wrapper">

                <div class="post-text">
                    <div class="post-meta">
                        <span><em>in</em> <a href="/category/programming" title="Programming" rel="category tag">Programming</a></span>
                        <span><em>22 Apr 2014</em></span>
                    </div>
                    <div class="heading-title">
                        <h2><a href="/post/full_stack_mooc_app_part_1_continued_saving_to_mongodb">Mooc Aggregator Project, Python backend Continued, saving to mongodb and postgres</a></h2>
                    </div>
                </div>
            </div>
        </li>
        
        
        
        <li>
            <div class="post-wrapper">

                <div class="post-text">
                    <div class="post-meta">
                        <span><em>in</em> <a href="/category/programming" title="Programming" rel="category tag">Programming</a></span>
                        <span><em>14 Apr 2014</em></span>
                    </div>
                    <div class="heading-title">
                        <h2><a href="/post/full_stack_mooc_app_part_1_python_backend">Mooc Aggregator Project, Python backend with MongoDB and SQLAlachemy</a></h2>
                    </div>
                </div>
            </div>
        </li>
        
         
      </ul>
    </div>
</div>

        </div> <!-- end row -->
      </div>
</section>
    <!-- end:content -->
<!-- Footer HERE -->
   
<!-- begin:copyright -->
<section id="copyright">
  <div class="container">
    <div class="row">
      <div class="col-md-6 col-sm-6 copy-left">
        <p>Copyright &copy; 2014 <strong><a href="/">brettdangerfield.com</a></strong>. <span style="float: right">Hosted on <a href="http://www.github.com/brettdanger/published_blog/">Github</a> | Powered by <a href="http://jekyllrb.com">Jekyll</a></span></p>
      </div>

      <div class="col-md-6 col-sm-6 copy-right">
        <ul class="list-inline social-icon">
          <li><a href="http://www.twitter.com/brettdanger" class="icon-twitter" rel="tooltip" title="" data-placement="top" data-original-title="Twitter"><i class="fa fa-twitter"></i></a></li>
          <li><a href="http://www.facebook.com/brettdanger" class="icon-facebook" rel="tooltip" title="" data-placement="top" data-original-title="Facebook"><i class="fa fa-facebook-square"></i></a></li>
          <li><a href="http://www.linkedin.com/pub/brett-dangerfield/8/150/392" class="icon-linkedin" rel="tooltip" title="" data-placement="top" data-original-title="LinkedIn"><i class="fa fa-linkedin"></i></a></li>
          <li><a href="http://github.com/brettdanger" class="icon-github" rel="tooltip" title="" data-placement="top" data-original-title="Github"><i class="fa fa-github"></i></a></li>
          <li><a href="https://plus.google.com/+BrettDangerfield" class="icon-googleplus" rel="tooltip" title="" data-placement="top" data-original-title="Google Plus"><i class="fa fa-google-plus"></i></a></li>
        </ul>
      </div>
    </div>
  </div>
</section>
<!-- end:copyrigt -->

    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
    <!-- Le javascript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
   <!-- Bootstrap core JavaScript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
    <script src="/static/js/bootstrap.js"></script>
    <script src="/static/js/masonry.pkgd.min.js"></script>
    <script src="/static/js/imagesloaded.pkgd.min.js"></script>
    <script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=false&amp;language=en"></script>
    <script src="/static/js/gmap3.min.js"></script>
    <script src="/static/js/jquery.isotope.min.js"></script>
    <script src="/static/js/jquery.easing.js"></script>
    <script src="/static/js/script.js"></script>
    <script type="text/javascript" src="/static/js/prettify/prettify.js"></script>


  </body>
</html>

